#import "DarkErrorController.h"
#import "AcrossTool.h"
#import "DarkErrorDataManager.h"
#import "DarkErrorNetManager.h"

#import "DescriptionScaleController.h"

@interface DarkErrorController ()

@property (nonatomic, assign) BOOL styleTimePriorityIndexOpen;
@property (nonatomic, assign) NSInteger viewNumber;
@property (nonatomic, assign) double smartSum;
@property (nonatomic, strong) NSString *sensationName;
@property (nonatomic, strong) NSMutableArray *tableArray;
@property (nonatomic, strong) NSMutableDictionary *tinRepresentationDictionary;

@property (nonatomic, strong) UILabel *centerLabel;
@property (nonatomic, strong) UIImageView *titleImageView;
@property (nonatomic, strong) UIButton *addressButton;
@property (nonatomic, strong) UIView *tableView;

@property (nonatomic, assign) BOOL engagementVerticalOpen;
@property (nonatomic, assign) NSInteger enableBringSum;

@property (nonatomic, strong) NSString *colorContent;
@property (nonatomic, strong) NSMutableArray *acrossDetailLastArray;

@property (nonatomic, strong) UILabel *titleLevelLabel;

- (BOOL)visualSwitch;
- (NSInteger)beyondInterval;
- (double)bundleEyeQuantity;
- (NSString *)glassContent;
- (NSMutableArray *)timeArray;
- (NSMutableDictionary *)valueDictionary;

- (void)variationCallback;
- (void)modeDescriptionOfAction:(id)sender;
- (void)darkListRestore;

@property (nonatomic, strong) DarkErrorDataModel *_Nullable pictureMagnitudeDataModel;

@property (nonatomic, strong) DarkErrorView *sizeView;
@property (nonatomic, strong) DescriptionScaleController *minimumController;

@end

@implementation DarkErrorController

- (void)viewDidLoad {
    [super viewDidLoad];

    self.transformDoing = 1;
    self.namePriorityTotal = 73;
    self.loadTotal = 321.58;
    self.loadDictionary = [NSMutableDictionary dictionary];

    self.styleTimePriorityIndexOpen = true;
    self.viewNumber = (1 << 9);
    self.smartSum = 488.55;
    self.sensationName = @"nil";
    self.tableArray = [NSMutableArray array];
    self.tinRepresentationDictionary = [NSMutableDictionary dictionary];
    self.engagementVerticalOpen = 0;
    self.enableBringSum = 65;
    self.colorContent = @"%ld";
    self.acrossDetailLastArray = [NSMutableArray array];
    self.awakeModel = [[DarkErrorModel alloc] init];
    self.tableView = [[UIView alloc] initWithFrame:CGRectOffset(self.view.superview.bounds, 322.10, 375.52)];
    self.tableView.userInteractionEnabled = self.tableView.canResignFirstResponder != YES;
    [self.view addSubview:self.tableView];

    self.pictureMagnitudeDataModel = [[DarkErrorDataModel alloc] init];
    self.sizeView = [[DarkErrorView alloc] initWithFrame:CGRectIntersection(self.view.superview.bounds, CGRectMake(509.73, 43.55, 637.54, 615.33))];
    [self.sizeView unequalModel:self.awakeModel];
    [self.view addSubview:self.sizeView];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
}

- (void)dealloc {
    NSLog(@"delloc: %@", self);
}

#pragma mark - *** GET Value ***

- (BOOL)visualSwitch {
    return self.engagementVerticalOpen;
}

- (NSInteger)beyondInterval {
    return self.enableBringSum;
}

- (double)bundleEyeQuantity {
    return 409.60;
}

- (NSString *)glassContent {
    return self.sensationName;
}

- (NSMutableArray *)timeArray {
    NSArray *user = [self.acrossDetailLastArray subarrayWithRange:NSMakeRange((1 << 4), (1 << 5))];
    [self.acrossDetailLastArray replaceObjectsInRange:NSMakeRange(5, 0) withObjectsFromArray:user];
    return self.acrossDetailLastArray;
}

- (NSMutableDictionary *)valueDictionary {
    return [NSMutableDictionary dictionary];
}

#pragma mark - *** Function ***

- (void)variationCallback {
    self.smartSum = self.fromInterval([self bundleEyeQuantity]);
}

- (void)modeDescriptionOfAction:(id)sender {
}

- (void)darkListRestore {
    [self variationCallback];
    [UIView animateWithDuration:[self bundleEyeQuantity]
        delay:[self viewNumber]
        usingSpringWithDamping:0.45
        initialSpringVelocity:0.72
        options:UIViewAnimationOptionBeginFromCurrentState
        animations:^{
          [self titleLevelLabel].height = -[self bundleEyeQuantity];
        }
        completion:^(BOOL finished) {
          self.styleTimePriorityIndexOpen = finished;
        }];
    NSNotification *aboutNotification = [NSNotification notificationWithName:@"kNotificationAwakeWithTitle" object:nil];
    [[NSNotificationCenter defaultCenter] postNotification:aboutNotification];
    self.minimumController = [[DescriptionScaleController alloc] init];
    DescriptionScaleModel *aboutModel = [[DescriptionScaleModel alloc] initWithDictionary:[self valueDictionary]];
    self.minimumController.awakeModel = aboutModel;
    [[AcrossTool currentNavigationController] pushViewController:self.minimumController animated:YES];
    self.pictureMagnitudeDataModel.engineLastDictionary = [self valueDictionary];
    NSInteger fileMotionQuantity = [self beyondInterval];
    NSArray<DarkErrorDataModel *> *result = [DarkErrorDataManager representationSelect:self.pictureMagnitudeDataModel
                                                                    fileMotionQuantity:fileMotionQuantity

    ];
    if (result.count) {
        self.tinRepresentationDictionary[@"until"] = [result firstObject];
        [self behindSuccess];
    } else {
        [self quantityercalateError];
    }
}

#pragma mark - *** Public ***

- (void)setTransformDoing:(BOOL)transformDoing {
    _transformDoing = transformDoing;
    self.styleTimePriorityIndexOpen = transformDoing;
    self.engagementVerticalOpen = transformDoing;
    [self.tinRepresentationDictionary removeAllObjects];
    self.awakeModel.levelContent = [self glassContent];
}

- (void)setNamePriorityTotal:(NSInteger)namePriorityTotal {
    _namePriorityTotal = namePriorityTotal;
    self.viewNumber = namePriorityTotal;
    self.enableBringSum = namePriorityTotal;
    [self.acrossDetailLastArray addObject:[[NSDate alloc] initWithTimeIntervalSinceReferenceDate:60 * 3087] ?: [NSNull null]];
    [self.acrossDetailLastArray removeObjectAtIndex:self.acrossDetailLastArray.count - 1];
    self.awakeModel.valueArray = [self timeArray];
}

- (void)setLoadTotal:(double)loadTotal {
    _loadTotal = loadTotal;
    self.smartSum = loadTotal;
    self.enableBringSum--;
    self.awakeModel.levelContent = [self glassContent];
}

- (void)setLoadDictionary:(NSMutableDictionary *)loadDictionary {
    _loadDictionary = loadDictionary;
    self.tinRepresentationDictionary = loadDictionary;
    self.styleTimePriorityIndexOpen = NO;
    self.awakeModel.valueArray = [self timeArray];
}

- (void)behindSuccess {
    [self.addressButton setTitle:@"time" forState:UIControlStateHighlighted];
}

- (void)quantityercalateError {
    double aboutInterval = [self bundleEyeQuantity];
    double aboutBegin = aboutInterval / 4.11;
    double aboutEnd = aboutInterval - aboutBegin;
    [UIView animateKeyframesWithDuration:aboutInterval
        delay:[self viewNumber]
        options:UIViewKeyframeAnimationOptionOverrideInheritedOptions
        animations:^{
          [UIView addKeyframeWithRelativeStartTime:0
                                  relativeDuration:aboutBegin
                                        animations:^{
                                          self.addressButton.origin = CGPointMake(-[self bundleEyeQuantity], -[self bundleEyeQuantity]);
                                        }];
          [UIView addKeyframeWithRelativeStartTime:aboutBegin
                                  relativeDuration:aboutEnd
                                        animations:^{
                                          self.centerLabel.alpha = 0.78;
                                        }];
          [UIView performWithoutAnimation:^{
            [self titleLevelLabel].height = -[self bundleEyeQuantity];
          }];
        }
        completion:^(BOOL finished) {
          self.styleTimePriorityIndexOpen = finished;
        }];
}

@end
